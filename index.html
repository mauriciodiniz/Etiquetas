<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Etiquetas 58mm — 88ml Delivery</title>

<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
  }

  .container {
    max-width: 350px;
    margin: auto;
  }

  label {
    font-weight: bold;
    font-size: 14px;
  }

  input {
    width: 100%;
    padding: 6px;
    margin-bottom: 12px;
    font-size: 16px;
  }

  button {
    width: 100%;
    padding: 10px;
    background: black;
    color: white;
    border: none;
    font-size: 18px;
    cursor: pointer;
    margin-top: 5px;
    font-weight: bold;
  }

  /* Pré-visualização da etiqueta */
  .preview-box {
    border: 1px solid #ccc;
    padding: 10px;
    margin-top: 15px;
    width: 58mm;
    min-height: 40mm;
    background: #fff;
  }

  /* ======= IMPRESSÃO ======= */
  @media print {

    body * {
      visibility: hidden;
    }

    #print-area, #print-area * {
      visibility: visible;
    }

    #print-area {
      position: absolute;
      left: 0;
      top: 0;
      width: 58mm;
    }

    .etiqueta {
      width: 58mm;
      padding: 5px;
      font-family: Arial, sans-serif;
      font-size: 12px;
    }

    .empresa {
      text-align: center;
      font-weight: bold;
      font-size: 13px;
    }

    .cnpj {
      text-align: center;
      font-size: 10px;
    }

    .linha {
      margin: 4px 0;
      border-bottom: 1px dashed black;
    }

    .produto {
      font-size: 15px;
      font-weight: bold;
      text-align: center;
      margin-top: 4px;
    }

    .valor {
      font-weight: bold;
      font-size: 13px;
    }

    .total {
      font-weight: bold;
      font-size: 20px; 
      margin-top: 5px;
      text-align: center;
    }

    .espaco-logo {
      height: 20mm;
      border: 1px dashed #ccc;
      margin-top: 10px;
    }
  }
</style>

</head>
<body>

<div class="container">

  <h2>Gerador de Etiquetas 58mm</h2>

  <label>NOME:</label>
  <input id="nome" type="text" placeholder="Ex: ANCHO ESTÂNCIA 92">

  <label>PESO (kg):</label>
  <input id="peso" type="text" placeholder="Ex: 0,952">

  <label>R$/KG:</label>
  <input id="preco" type="text" placeholder="Ex: 79,90">

  <button onclick="imprimir()">IMPRIMIR</button>

  <h3>Pré-visualização</h3>
  <div id="preview" class="preview-box"></div>

</div>

<!-- ÁREA INVISÍVEL PARA IMPRESSÃO -->
<div id="print-area" style="position:absolute; left:-9999px"></div>

<script>
/* ----------- MÁSCARA DE PESO ------------ */
document.getElementById("peso").addEventListener("input", function () {
  let v = this.value.replace(",", ".").replace(/[^0-9.]/g, "");
  if (v.split(".").length > 2) v = v.replace(/\.+$/, "");
  this.value = v.replace(".", ",");
  atualizarPreview();
});

/* ---------- MÁSCARA DE PREÇO ---------- */
document.getElementById("preco").addEventListener("input", function () {
  let v = this.value.replace(/\D/g, "");
  v = (v / 100).toFixed(2) + "";
  v = v.replace(".", ",");
  this.value = v;
  atualizarPreview();
});

/* Atualiza preview ao digitar o nome */
document.getElementById("nome").addEventListener("input", atualizarPreview);

/* -------- FUNÇÃO ATUALIZAR PREVIEW -------- */
function atualizarPreview() {
  const nome = document.getElementById("nome").value || "";
  const peso = document.getElementById("peso").value || "";
  const preco = document.getElementByI
